<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<style>
	.Portatil{ color: red; }
	.Sobretaula{ color: green; }
	.Mobil { color: blue; }
</style>
</head>
<body>
	<script type="text/javascript">

		function Producte(nref,desc,marca,cat,preu){
			this.nref = nref;
			this.desc = desc;
			this.marca = marca;
			this.cat = cat;
			this.preu = preu;

			this.print = print;
			function print(){
				return this.nref+" - "+this.desc+" - "+this.marca+" - "+this.cat+" - "+this.preu;
			}
		}

	</script>
<h2>Shopping List</h2>
<hr/>
Num.Referencia: <input type="text" id="ref"/> <br>
Descripci√≥: <input type="text" id="desc"/> <br>
Marca: <select id="marca">
	<option value="Apple">Samsung</option>
	<option value="Samsung">Apple</option>
	<option value="Xiaomi">Xiaomi</option>
	</select>
<br>
Categoria: <select id="cat">
	<option value="Portatil">Portatil</option>
	<option value="Sobretaula">Sobretaula</option>
	<option value="Mobil">Mobil</option>
	</select>
<br>
Preu: <input type="number" id="preu"/>
<br>
<br>
<button id="b1">Afegir</button>
<button id="b2">Mostra LLista</button>
<button id="b3">Eliminar</button>
<button id="b4">Filtrar per Categoria</button>
<button id="b5"> Ordena per preu ASC</button>
<button id="b6"> Ordena per preu DESC</button>
<button id="b7"> Preu Total</button>
<ol id="lista">
	
</ol>
<script>
	var productes = [];
	var saldo = 2000;

	productes.push(new Producte("12332","pacopaco","Apple","Portatil","20"));
	productes.push(new Producte("4562","tonitoni","Xiaomi","Sobretaula","10"));
	productes.push(new Producte("9812","juanjuan","Samsung","Portatil","202"));


$(document).ready(function(){
		

		function crearProducte(){
			var r = $("#ref").val();
			var n = $("#desc").val();
			var m = $("#marca").val();
			var c = $("#cat").val();
			var p = $("#preu").val();

			var producte = new Producte(r,n,m,c,p);

			return producte;
		}

		function printProducte(cat){
			$("#lista").empty();
			for (var i=0; i < productes.length; i++) {
				 var info = productes[i].print();
				 var liClass = productes[i].cat;
				 var newli = $("<li>").text(info).addClass(liClass);
				 
				 if(cat==productes[i].cat || cat=="TOTS"){
				 	$("#lista").append(newli);
				 }
			}
		}

		function total(){
			var total = 0;
			for(var i=0; i<productes.length; i++){
				total += parseInt(productes[i].preu);
			}
			return total;
		}

		$("#b1").click(function(){
			var p = crearProducte();
			var t = total();
			var nt = parseInt(t) + parseInt(p.preu);
			if(nt<saldo){
				productes.push(p);
			}
			else {
				alert("No more money to waste");
			}
			printProducte("TOTS");
		});


		$("#b2").click(function(){
			printProducte("TOTS");
		});

		$("#b3").click(function(){
			var r = $("#ref").val();
			var b = 0;
			for(var i=0; i<productes.length; i++){
				var rp = productes[i].nref;
				if(r==rp){
					productes.splice(i,1);
					b = 1;
				}
			}
			printProducte();
			if (b==0) {
				alert("No existeix aquest producte");
			}
		});

		$("#b4").click(function(){
			var c = $("#cat").val();
			printProducte(c);
		});

		$("#b5").click(function(){
			productes.sort(function (a,b){
				return a.preu - b.preu;
			});
			printProducte("TOTS");
		});

		$("#b6").click(function(){
			productes.sort(function (a,b){
				return b.preu - a.preu;
			});
			printProducte("TOTS");
		});

		$("#b7").click(function(){
			var t = total();
			alert("TOTAL: "+t)
		});
});
</script>
</body>
</html>